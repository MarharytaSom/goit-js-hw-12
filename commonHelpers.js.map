{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '44648144-e72e61b3f392a294e0f76f542';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nasync function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: perPage,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n\nexport { fetchImages };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = new SimpleLightbox('.photo-card a', {});\n\nexport function renderImages(images) {\n  const galleryElement = document.getElementById('gallery');\n\n  const markup = images.map(image => `\n    <div class=\"photo-card\">\n      <a href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n      </a>\n      <div class=\"info\">\n        <p class=\"info-item\"><b>Likes:</b> ${image.likes}</p>\n        <p class=\"info-item\"><b>Views:</b> ${image.views}</p>\n        <p class=\"info-item\"><b>Comments:</b> ${image.comments}</p>\n        <p class=\"info-item\"><b>Downloads:</b> ${image.downloads}</p>\n      </div>\n    </div>\n  `).join('');\n\n  galleryElement.insertAdjacentHTML('beforeend', markup);\n  gallery.refresh();\n}\n\nexport function clearGallery() {\n  const galleryElement = document.getElementById('gallery');\n  galleryElement.innerHTML = '';\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, clearGallery } from './js/render-functions.js';\n\nconst searchForm = document.getElementById('search-form');\nconst loadMoreButton = document.getElementById('load-more');\n\nlet query = '';\nlet page = 1;\n\nsearchForm.addEventListener('submit', onSearch);\nloadMoreButton.addEventListener('click', onLoadMore);\n\nasync function onSearch(event) {\n  event.preventDefault();\n  query = event.currentTarget.elements.query.value.trim();\n  if (!query) return;\n\n  page = 1;\n  clearGallery();\n  loadMoreButton.classList.add('hidden');\n\n  try {\n    const data = await fetchImages(query, page);\n    renderImages(data.hits);\n    if (data.totalHits > data.hits.length) {\n      loadMoreButton.classList.remove('hidden');\n    }\n  } catch (error) {\n    console.error('Error on search:', error);\n  }\n}\n\nasync function onLoadMore() {\n  page += 1;\n  try {\n    const data = await fetchImages(query, page);\n    renderImages(data.hits);\n    const { height: cardHeight } = document\n      .querySelector('.photo-card')\n      .getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n    if (page * 15 >= data.totalHits) {\n      loadMoreButton.classList.add('hidden');\n      alert(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (error) {\n    console.error('Error on load more:', error);\n  }\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","gallery","SimpleLightbox","renderImages","images","galleryElement","markup","image","clearGallery","searchForm","loadMoreButton","onSearch","onLoadMore","event","data","cardHeight"],"mappings":"6vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEjB,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CACxD,GAAI,CAYF,OAXiB,MAAMC,EAAM,IAAIL,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUC,CACX,CACP,CAAK,GACe,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACH,CCpBA,MAAMC,EAAU,IAAIC,EAAe,gBAAiB,CAAE,CAAA,EAE/C,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAAiB,SAAS,eAAe,SAAS,EAElDC,EAASF,EAAO,IAAIG,GAAS;AAAA;AAAA,iBAEpBA,EAAM,aAAa;AAAA,oBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,6CAGbA,EAAM,KAAK;AAAA,6CACXA,EAAM,KAAK;AAAA,gDACRA,EAAM,QAAQ;AAAA,iDACbA,EAAM,SAAS;AAAA;AAAA;AAAA,GAG7D,EAAE,KAAK,EAAE,EAEVF,EAAe,mBAAmB,YAAaC,CAAM,EACrDL,EAAQ,QAAO,CACjB,CAEO,SAASO,GAAe,CAC7B,MAAMH,EAAiB,SAAS,eAAe,SAAS,EACxDA,EAAe,UAAY,EAC7B,CC1BA,MAAMI,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAiB,SAAS,eAAe,WAAW,EAE1D,IAAId,EAAQ,GACRC,EAAO,EAEXY,EAAW,iBAAiB,SAAUE,CAAQ,EAC9CD,EAAe,iBAAiB,QAASE,CAAU,EAEnD,eAAeD,EAASE,EAAO,CAG7B,GAFAA,EAAM,eAAc,EACpBjB,EAAQiB,EAAM,cAAc,SAAS,MAAM,MAAM,OAC7C,EAACjB,EAEL,CAAAC,EAAO,EACPW,IACAE,EAAe,UAAU,IAAI,QAAQ,EAErC,GAAI,CACF,MAAMI,EAAO,MAAMnB,EAAYC,EAAOC,CAAI,EAC1CM,EAAaW,EAAK,IAAI,EAClBA,EAAK,UAAYA,EAAK,KAAK,QAC7BJ,EAAe,UAAU,OAAO,QAAQ,CAE3C,OAAQV,EAAO,CACd,QAAQ,MAAM,mBAAoBA,CAAK,CACxC,EACH,CAEA,eAAeY,GAAa,CAC1Bf,GAAQ,EACR,GAAI,CACF,MAAMiB,EAAO,MAAMnB,EAAYC,EAAOC,CAAI,EAC1CM,EAAaW,EAAK,IAAI,EACtB,KAAM,CAAE,OAAQC,CAAU,EAAK,SAC5B,cAAc,aAAa,EAC3B,wBACH,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,EACGlB,EAAO,IAAMiB,EAAK,YACpBJ,EAAe,UAAU,IAAI,QAAQ,EACrC,MAAM,4DAA4D,EAErE,OAAQV,EAAO,CACd,QAAQ,MAAM,sBAAuBA,CAAK,CAC3C,CACH"}